[gd_scene load_steps=12 format=3 uid="uid://bhssg8crf4j4x"]

[ext_resource type="Script" uid="uid://cxky3gdrakv8w" path="res://Scenes/Enemy/enemy.gd" id="1_mw074"]
[ext_resource type="Resource" uid="uid://c6omelndw1qw2" path="res://Resources/EnemyStats.tres" id="2_nvvbs"]
[ext_resource type="Texture2D" uid="uid://cxlqh3pmh62sn" path="res://Assets/Temp/slime_body.png" id="3_2t2r4"]
[ext_resource type="Script" uid="uid://btnm3yr0h83c8" path="res://Scenes/Enemy/EnemyAttack.gd" id="4_dmwl5"]
[ext_resource type="Script" uid="uid://b3nnfs31076mw" path="res://Scripts/behavior.gd" id="4_pqgp3"]
[ext_resource type="Script" uid="uid://cytihr5nd5wq5" path="res://Scenes/Enemy/EnemyIdle.gd" id="5_4ad2a"]
[ext_resource type="Texture2D" uid="uid://ddcj103clnjb2" path="res://Assets/Temp/muzzle_flash.png" id="5_d40jh"]
[ext_resource type="Script" uid="uid://cm2hclm0qfc6y" path="res://Scenes/Enemy/EnemyMovement.gd" id="5_pqgp3"]
[ext_resource type="Script" uid="uid://dlyifutkganda" path="res://Scripts/death.gd" id="8_kiqm3"]

[sub_resource type="CircleShape2D" id="CircleShape2D_dmwl5"]
radius = 32.0

[sub_resource type="CircleShape2D" id="CircleShape2D_2t2r4"]
radius = 250.0

[node name="Enemy" type="CharacterBody2D"]
motion_mode = 1
script = ExtResource("1_mw074")
stats = ExtResource("2_nvvbs")

[node name="EnemySprite" type="Sprite2D" parent="."]
position = Vector2(0, -21)
scale = Vector2(0.6, 0.6)
texture = ExtResource("3_2t2r4")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, -16)
shape = SubResource("CircleShape2D_dmwl5")

[node name="DetectionRange" type="Area2D" parent="."]
unique_name_in_owner = true

[node name="Radius" type="CollisionShape2D" parent="DetectionRange"]
unique_name_in_owner = true
position = Vector2(0, -16)
shape = SubResource("CircleShape2D_2t2r4")

[node name="Behavior" type="Node2D" parent="."]
unique_name_in_owner = true
script = ExtResource("4_pqgp3")

[node name="Idle" type="Node2D" parent="Behavior" node_paths=PackedStringArray("enemy")]
script = ExtResource("5_4ad2a")
enemy = NodePath("../..")

[node name="Movement" type="Node2D" parent="Behavior" node_paths=PackedStringArray("enemy")]
script = ExtResource("5_pqgp3")
enemy = NodePath("../..")

[node name="Attack" type="Node2D" parent="Behavior" node_paths=PackedStringArray("move_state", "enemy")]
script = ExtResource("4_dmwl5")
move_state = NodePath("../Movement")
enemy = NodePath("../..")

[node name="Death" type="Node2D" parent="Behavior" node_paths=PackedStringArray("enemy")]
script = ExtResource("8_kiqm3")
enemy = NodePath("../..")

[node name="CrosshairMark" type="Marker2D" parent="."]
unique_name_in_owner = true
position = Vector2(0, -19)

[node name="Crosshair" type="Sprite2D" parent="CrosshairMark"]
unique_name_in_owner = true
position = Vector2(40, 0)
scale = Vector2(0.3125, 0.3125)
texture = ExtResource("5_d40jh")

[node name="ShootingCD" type="Timer" parent="."]
unique_name_in_owner = true
wait_time = 0.3

[connection signal="body_entered" from="DetectionRange" to="Behavior/Attack" method="_on_detection_range_body_entered"]
[connection signal="body_exited" from="DetectionRange" to="Behavior/Attack" method="_on_detection_range_body_exited"]
[connection signal="timeout" from="ShootingCD" to="Behavior/Attack" method="_on_shooting_cd_timeout"]
